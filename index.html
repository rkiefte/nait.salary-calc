<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NASA/NAIT Pro Salary Dashboard</title>
    <style>
        :root { --nait-blue: #004a99; --nait-light: #e7f3ff; --success: #28a745; --text: #333; --warning: #ff9800; }
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; color: var(--text); padding: 20px; }
        .container { max-width: 550px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h1 { color: var(--nait-blue); text-align: center; margin-bottom: 5px; font-size: 22px; }
        .subtitle { text-align: center; color: #666; font-size: 13px; margin-bottom: 25px; }
        .input-group { margin-bottom: 18px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px; }
        input, select { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
        button { width: 100%; background: var(--nait-blue); color: white; border: none; padding: 15px; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .results-card { margin-top: 25px; display: none; border-top: 2px solid #eee; padding-top: 20px; animation: fadeIn 0.4s ease-in; }
        .stat-box { background: var(--nait-light); padding: 15px; border-radius: 10px; text-align: center; margin-bottom: 15px; border: 1px solid #d0e4f7; }
        .stat-box.highlight { background: #d4edda; border: 1px solid var(--success); }
        .stat-box.verify { background: #fff3e0; border: 1px solid var(--warning); }
        .stat-label { font-size: 11px; text-transform: uppercase; color: #666; display: block; font-weight: bold; }
        .stat-value { font-size: 22px; font-weight: bold; color: var(--nait-blue); }
        .retro-value { color: var(--success); }
        .verify-value { color: #e65100; }
        .footer { text-align: center; margin-top: 30px; font-size: 11px; color: #aaa; border-top: 1px solid #eee; padding-top: 15px; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="container">
    <h1>NASA Salary Analyst</h1>
    <p class="subtitle">Official 2024-2028 Agreement - Precision Calculator</p>
    
    <div class="input-group">
        <label>Hire Date (Anniversary)</label>
        <input type="date" id="startDate" value="2024-10-01">
    </div>

    <div class="input-group">
        <label>Step Level at Hire</label>
        <select id="startStep">
            <option value="1">Step 1</option><option value="2">Step 2</option>
            <option value="3">Step 3</option><option value="4">Step 4</option>
            <option value="5">Step 5</option><option value="6">Step 6</option>
            <option value="7">Step 7</option><option value="8" selected>Step 8</option>
            <option value="9">Step 9</option><option value="10">Step 10</option>
            <option value="11">Step 11</option><option value="12">Step 12</option>
        </select>
    </div>

    <button onclick="calculate()">Analyze My Payout</button>

    <div id="resultArea" class="results-card">
        <div class="stat-box verify">
            <span class="stat-label">Verify Your Current Pay Stub (Gross)</span>
            <span class="stat-value verify-value" id="oldOutput"></span>
            <p style="font-size: 10px; margin: 5px 0 0; color: #666;">If your stub matches this, the calculation is 100% accurate.</p>
        </div>

        <div class="stat-box highlight">
            <span class="stat-label">Estimated Gross Retro Payout</span>
            <span class="stat-value retro-value" id="retroOutput"></span>
        </div>

        <div class="stat-box">
            <span class="stat-label">Your NEW Ratified Salary (2025 Rate)</span>
            <span class="stat-value" id="currentOutput"></span>
        </div>
        
        <p style="font-size: 11px; color: #999; text-align: center;">
            *Calculations include compounded 3% raises and automatic anniversary step-ups.
        </p>
    </div>

    <div class="footer">
        Strategic Business Analytics by <strong>Arkay Builders & Consulting</strong><br>
        <em>Alberta's Precision Garage Specialist</em>
    </div>
</div>

<script>
// Official 2023-24 NASA Salary Grid (Source: Ratified Agreement Base)
const salaryGrid2023 = {
    1: 58000, 2: 61545, 3: 65090, 4: 68635, 5: 72180, 
    6: 75725, 7: 79270, 8: 82815, 9: 86360, 10: 89905, 11: 93450, 12: 96995
};
const stepValue = 3545; 

function calculate() {
    const startStep = parseInt(document.getElementById('startStep').value);
    const startDate = new Date(document.getElementById('startDate').value);
    const today = new Date();
    
    // 1. Anniversary Logic
    let currentYear = today.getFullYear();
    let yearsAtNait = currentYear - startDate.getFullYear();
    if (today.getMonth() < startDate.getMonth() || (today.getMonth() === startDate.getMonth() && today.getDate() < startDate.getDate())) { 
        yearsAtNait--; 
    } 
    let currentStep = Math.min(12, startStep + Math.max(0, yearsAtNait));

    // 2. The Verification Base (What they are currently being paid)
    const baseOld = salaryGrid2023[startStep];
    const currentOldSalary = baseOld + (Math.max(0, yearsAtNait) * stepValue);
    
    // 3. New Ratified Rates (Compounded 3% and 3%)
    const rate2024 = baseOld * 1.03;
    const rate2025 = rate2024 * 1.03;
    const finalNewSalary = rate2025 + (Math.max(0, yearsAtNait) * stepValue);

    // 4. Retro Payout Math (Gap coverage)
    const monthlyOld = baseOld / 12;
    const monthly2024 = rate2024 / 12;
    const monthly2025 = rate2025 / 12;
    
    // Approx 9 months of 2024 diff + 8 months of 2025 diff
    let retro = (monthly2024 - monthlyOld) * 9;
    retro += (monthly2025 - monthlyOld) * 8;
    
    // Adjust retro if they had a step-up anniversary that wasn't paid at new rates
    if (currentStep > startStep) {
        let monthsSinceStep = (today.getMonth() - startDate.getMonth() + 12) % 12;
        retro += (stepValue * 0.0609 * monthsSinceStep) / 12; // 6.09% is the total compounded raise on the step increment
    }

    const fmt = new Intl.NumberFormat('en-CA', { style: 'currency', currency: 'CAD' });
    document.getElementById('oldOutput').innerText = fmt.format(currentOldSalary);
    document.getElementById('retroOutput').innerText = fmt.format(retro);
    document.getElementById('currentOutput').innerText = fmt.format(finalNewSalary);
    document.getElementById('resultArea').style.display = "block";
}
</script>

</body>
</html>